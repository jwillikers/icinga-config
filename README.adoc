= Icinga Config
Jordan Williams <jordan@jwillikers.com>
:experimental:
:icons: font
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]
:Icinga: https://icinga.com/[Icinga]

My configuration for the {Icinga} monitoring tool.

// todo http://nagios.manubulon.com/index_snmp.html

== Usage

This repository contains the configuration files for {Icinga}.
The configuration is meant to be used with the containers from the https://github.com/jwillikers/home-lab-helm[Home Lab Helm] repository.

. Create a `Projects` directory in the current user's home directory.
+
[,sh]
----
mkdir -p ~/Projects
----

. Clone this repository under `~/Projects`.
+
[,sh]
----
git -C ~/Projects clone git@github.com:jwillikers/icinga-config.git
----

. Generate the `IcingaDbWebApiPassword` constant. 
+
[,sh]
----
echo "const IcingaDbWebApiPassword = \"$(openssl rand -base64 30)\"" > etc/icinga2/constants.d/icingadb-web-api-user-password.conf
----

. Generate the `TicketSalt`.
+
[,sh]
----
echo "const TicketSalt = \"$(openssl rand -base64 30)\"" > etc/icinga2/constants.d/ticket-salt.conf
----

. Fill in any missing credentials in the files in the `constants.d` directory, such as SNMPv3 authentication and encryption keys.

. Then mount the provided `etc/` directory inside the Icinga2 server container at `/data/etc`.

=== Features

To enable a feature, create a relative symlink in the `features-enabled` subdirectory that points to the feature configuration file in the `features-available` subdirectory.
The following command demonstrates this by enabling the `icingadb` feature.

[,sh]
----
ln --relative --symbolic etc/icinga2/features-available/icingadb.conf etc/icinga2/features-enabled/icingadb.conf
----

== References

* https://icinga.com/docs/icinga-2/latest/doc/04-configuration/[Icinga 2 Documentation: Configuration]
* https://github.com/Icinga/docker-icinga2[Icinga 2 - Docker image]
* https://github.com/Icinga/docker-icingaweb2[Icinga Web 2 - Docker image]
* https://icinga.com/docs/icinga-db-web/latest/doc/03-Configuration/[Icinga DB Web: Configuration]

== Code of Conduct

Please refer to the project's link:CODE_OF_CONDUCT.adoc[Code of Conduct].

== License

This repository is licensed under the https://www.gnu.org/licenses/gpl-3.0.html[GPLv3].
Please refer to the bundled link:LICENSE.adoc[license].

== Copyright

Â© 2023 Jordan Williams

== Authors

mailto:{email}[{author}]
